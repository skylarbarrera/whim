# Whim - Environment Variables

# Required
GITHUB_TOKEN=           # GitHub PAT with repo permissions
REPOS=                  # Comma-separated: owner/repo1,owner/repo2

# Security
API_KEY=                # API key for orchestrator endpoints (optional but recommended)

# Database (change in production)
POSTGRES_USER=whim
POSTGRES_PASSWORD=whim
POSTGRES_DB=whim

# Port mappings (single source of truth)
POSTGRES_PORT=5433
REDIS_PORT=6380
ORCHESTRATOR_PORT=3002
DASHBOARD_PORT=3003

# Service URLs (derived from ports above)
DATABASE_URL=postgres://whim:whim@localhost:5433/whim
REDIS_URL=redis://localhost:6380
ORCHESTRATOR_URL=http://localhost:3002

# Rate Limiting
MAX_WORKERS=2           # Max concurrent workers
DAILY_BUDGET=200        # Max iterations per day
COOLDOWN_SECONDS=60     # Seconds between worker spawns

# Worker Configuration
STALE_THRESHOLD=300     # Seconds before worker marked stale (heartbeat timeout)
WORKER_IMAGE=whim-worker:latest
LOOP_INTERVAL_MS=5000   # Orchestrator main loop interval
HARNESS=claude          # AI harness: claude or codex

# API Keys
ANTHROPIC_API_KEY=      # Required for Claude harness
OPENAI_API_KEY=         # Required for Codex harness

# Intake Configuration
INTAKE_LABEL=whim       # GitHub label to watch
POLL_INTERVAL=60000     # GitHub poll interval (ms)
ALLOWED_USERS=          # Comma-separated GitHub usernames authorized to trigger work (required)

# Spec Generation
USE_RALPH_SPEC=false    # Set to "true" to use Ralph CLI spec generation (requires Ralph v0.3+)

# Debug (optional)
VERBOSE=false           # Enable verbose logging
